

# 计算机网络:链路层

姓名:陈扬17150011001

P105 1、3，7，9，10，11，13，16 20，22，26，27，30，33，34 

---

3-01 数据链路（即逻辑链路）与链路（即物理链路）有何区别？“电路接通了”与“数据链路接通了”的区别何在？

物理链路是指一个节点到另一个节点的一段物理线路,数据链路是指在一条线路上传输数据是,不仅仅要有物理线路,还需要有一些列的协议控制数据的传输.

电路接通是指这个节点间的物理线路接通了,而数据链路接通了是指在两个节点间可能有一系列的物理链路,通过一系列的协议使其能够进行通信.

---

3-03 网络适配器的作用是什么？网络适配器工作在哪一层？

网络适配器又被称为网卡,作用主要是负责数据的串行传输和并行传输的转换,.以及实现以太网协议.

工作在链路层和物理层.

----

3-07 要发送的数据为 1101011011 采用 CRC 的生成多项式是$$ P(X) =X^4+X+1$$。试求应添加在数据后面的余数。

- 数据在传输过程中最后一个 1 变成了 0, 问接收端能否发现？
- 若数据在传输过程中最后两个 1 都变成了 0, 问接收端能否发现？
- 采用 CRC 检验后，数据链路层的传输是否就变成了可靠的传输？

> 1. 可以发现错误
>
>    - $$
>      k=4,st.\ \ \  P=10011\\数据=1101011011+0000=11010110110000\\\begin{align}&\mspace{1.3cm} 1100001010\\10011=&\sqrt{11010110110000} \\&\;\;\;10011\\=&\;\;\;\;\;\overline{10011}\\&\;\;\;\;\;10011\\=&\;\;\;\;\;\;\;\overline{000010110}\\&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;10011\\=&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\overline{010100}\\&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;10011\\=&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\overline{01110}\\&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;1110\\=&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\overline{\;\;\;\;\;\;\;\;0}\end{align}\\校验序列=1110\\若传输数据变成1101011010\\
>      $$
>
>    - $$
>      校验=1101011010+1110=11010110101110\\\begin{align}&\mspace{1.3cm} 1100001011\\10011=&\sqrt{11010110101110} \\&\;\;\;10011\\=&\;\;\;\;\;\overline{10011}\\&\;\;\;\;\;10011\\=&\;\;\;\;\;\;\;\overline{000010101}\\&\;\;\;\;\;\;\;\;\;\;\;\;\;\;10011\\=&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\overline{011011}\\&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;10011\\=&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\overline{10000}\\&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;10011\\=&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\overline{\;0011}\end{align}\\R-余数不为0,可以发现错误
>      $$
>
>    
>
> 2. 可以发现错误
>
>    $$
>    校验=1101011000+1110=11010110001110\\\begin{align}&\mspace{1.3cm} 1100001001\\10011=&\sqrt{11010110001110} \\&\;\;\;10011\\=&\;\;\;\;\;\overline{10011}\\&\;\;\;\;\;10011\\=&\;\;\;\;\;\;\;\overline{000010001}\\&\;\;\;\;\;\;\;\;\;\;\;\;\;\;10011\\=&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\overline{001011}\\&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;00000\\=&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\overline{10110}\\&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;10011\\=&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\overline{\;0101}\end{align}\\R-余数不为0,可以发现错误
>    $$
>    
>
> 3. 采用CRC检错,数据在链路层的传输并非变成了可靠度传输,只是接收方发现错误后会简单的丢弃
>
> 

---

3-09 一个 PPP 帧的数据部分（用十六进制写出）是 7D 5E FE 27 7D 5D 7D 5D 65 7D 5E。

试问真正的数据是什么（用十六进制写出）?

Answer:7D是转义字符:7D 5E->7E;7D 5D->7D

ans=7E FE 27 7D 7D 65 7E



---

3-10 PP 协议使用同步传输技术传送比特串0110111111111100试问经过零比特填充后变成怎样的比特串？若接收端收到的 PP 帧的数据部分是 0001110111110111110110, 问删除发送端加入的零比特后变成怎样的比特串？

0bit填充:11111->111110

变换后:011011111011111000

同理接收到的字符串反向变换后得到:00011101111111111110



---

3-11 试分别讨论以下各种情况在什么条件下是透明传输，在什么条件下不是透明传输。（提示：请弄清什么是“透明传输”，然后考虑能否满足其条件。）

>透明传输简单理解将传输的内容在从源到目的的过程中，底层协议不对业务数据内容做任何改变。 从上层角度看，似乎就是一个透明的管道，什么都可以传。非透明传输就是底层协议要对传输内容有限制或者修改。
>
>举个例子，A和B直接自己拉一根E1电路，爱传什么协议，什么报文，只要A和B协商好，都OK。想传IP，以太、哪怕自己定义的协议报文都随便。反正E1是透明的.
>
>但是如果A和B之间用的是PW（一般常说的martini L2VPN就是PW），那么A和B只能传以太报文，想传个非以太，对不起，不行。这种就是非透明的。

 (1) 普通的电话通信。

从传输语音的角度来看,声音应该是模拟信号,但是传输的时候模拟信号要先转化为数字信号,到了接收方数字信号再转化为模拟信号,而这两个转化的过程是有信心损失的,不可能完全原封不动的把人的声音传输过去,所以电话传输不是透明的.

 (2) 互联网提供的电子邮件服务。

是透明的,因为信件接收方收到的邮件和发送方发出邮件时的内容是完全一致的.

---

3-13 局域网的主要特点是什么？为什么局域网采用广播通信方式而广域网不采用呢?

局域网的主要特点是网络为目标单位所有,相对广域网无论是连接数量还是覆盖范围都要小得多,也因此有更好的数据传输效率.

在广域网中由于节点太多了,采用广播的机制会照成资源的浪费,也可能带来安全上的隐患.



---

3-16 数据率为 10 Mbit/s的以太网在物理媒体上的码元传输速率是多少码元秒？

>WIKI:**曼彻斯特编码**（**Manchester coding**）又称**自同步码**、**相位编码**（**phase encoding**，**PE**），能够用[信号](https://zh.wikipedia.org/wiki/信号)的变化来保持发送设备和接收设备之间的[同步](https://zh.wikipedia.org/wiki/同步)。它用[电压](https://zh.wikipedia.org/wiki/電壓)的变化来分辨0和1，从高电平到低电平的跳变代表1，而从低电平到高电平的跳变代表0(as per G.E.Tomas编码方式)。从高电平到低电平的跳变代表0，而从低电平到高电平的跳变代表1(as per IEEE 802.3编码方式)，下方有所展示。[[1\]](https://zh.wikipedia.org/wiki/曼彻斯特编码#cite_note-:0-1) 信号的保持不会超过一个[比特位](https://zh.wikipedia.org/wiki/比特)的时间间隔。即使是0或1的序列，信号也将在每个时间间隔的中间发生跳变。这种跳变将允许接收设备的时钟与发送设备的时钟保持一致。[[2\]](https://zh.wikipedia.org/wiki/曼彻斯特编码#cite_note-2)
>
>优点:与[NRZ](https://zh.wikipedia.org/wiki/不歸零)相比，曼彻斯特编码提供一种同步机制，保证发送端与接收端信号同步。[[3\]](https://zh.wikipedia.org/wiki/曼彻斯特编码#cite_note-:1-3)
>
>缺点:曼彻斯特编码的[频率](https://zh.wikipedia.org/wiki/頻率)要比[NRZ](https://zh.wikipedia.org/wiki/不歸零)高一倍，[传输](https://zh.wikipedia.org/wiki/传输)等量数据所需的[带宽](https://zh.wikipedia.org/wiki/带宽)大一倍。[[3\]](https://zh.wikipedia.org/wiki/曼彻斯特编码#cite_note-:1-3)
>
>![img](https://tva1.sinaimg.cn/large/006y8mN6ly1g8ped4br6aj30i208kt92.jpg)

Answer:在以太网中采用的是曼切斯特编码,在编码前的传输速率是$$10\times10^6 bit/s$$,在物理线路上传输的是曼切斯特编码的信息,经过曼切斯特编码后,两个曼切斯特码元的才能承载编码前一个码元的信息,所以在物理线路是传输码元速率变为每秒$$20\times10^6$$个码元

---

3-20 假定 1 km 长的 CSMA/CD网络的数据率为1Gbit/s。设信号在网络上的传播速率为200000km/s。求能够使用此协议的最短帧长。

> 1km长的CSMA/CD网络的端到端传播时延$$\tau=(1km)/(2000000km/s)=5\mu s$$,
>
> $$2\tau=10\mu s$$
>
> 发送的信息:$$(1Gbit/s)\times (10\mu s)=10000bit$$
>
> 所有最短帧长为10000bit



---

3-22 假定在使用 CSMACD 协议的 10 Mbit/ s 以太网中某个站在发送数据时检测到碰撞执行退避算法时选择了随机数 r=100。试问这个站需要等待多长时间后才能再次发 送数据?如果是100Mbit/s的以太网呢？

> 10Mbit/s的争用时间是512比特时,r=100时,退避时间是51200比特时
>
> 等待时间51200/10=5.12ms
>
> 对100Mbit/s的网络,退避时间仍然是51200比特时
>
> 等待时间:51200/100=0.512ms



---

3-26 以太网上只有两个站，它们同时发送数据，产生了碰撞。于是按截断二进制指数退避算法进行重传。重传次数记为；i=1,2,3, 试计算第 1 次重传失败的概率、第 2 次重传失败的概率、第 3 次重传失败的概率，以及一个站成功发送数据之前的平均重传次数。
$$
定义第i次传输失败的概率为P,\\
P_i=(0.5)^k,\qquad k\in[i..N]\\
\begin{align}
st.\ & P_1=0.5\\
&P_2=0.25\\
&p_3=0.125\\
&P(X=1)=0.5\\
&P(X=2)=(0.5)\times(1-0.25)=0.325\\
&P(X=3)=(0.5)\times(0.25)\times(1-0.125)\approx0.1095\\
\end{align}
\\
平均重传次数:
E(X)=1\times P_1+2\times P_2+...+N\times P_N\approx1.6
$$


---

3-27 有 10 个站连接到以太网上。试计算以下三种情况下每一个站所能得到的带宽。

 (1)10 个站都连接到一个 10 Mbit/s以太网集线器；
$$
带宽100\%利用率下:\\
\frac { 10Mbit/s }{ 10 } =10Mbit/s
$$


 (2)10 个站都连接到一个 100 Mbit/s以太网集线器
$$
带宽100\%利用率下:\\
\frac { 100Mbit/s }{ 10 } =100Mbit/s
$$


 (3)10 个站都连接到一个 10 Mbit/s以太网交换机。

$$
假设交换机总带宽大于100Mbit/s\\
st.每个站都可以占到10Mbit/s\\
\\\;
\\\;
\\\;
假设交换机总带宽N<100Mbit/s\\
st.每个站都可以占到(N/10)Mbit/s\\
$$


---

3-30 在图 3-30 中，某学院的以太网交换机有三个接口分别和学院三个系的以太网相连，另外三个接口分别和电子邮件服务器、万维网服务器以及一个连接互联网的路由器相连。图中的 A, B 和 C 都是 100 Mbit/s以太网交换机。假定所有的链路的速率都是 100 Mbit/s,并且图中的9台主机中的任何一个都可以和任何一个服务器或主机通信。试计算这 9 台主机和两个服务器产生的总的吞吐量的最大值。为什么？

![image-20191106121934102](https://tva1.sinaimg.cn/large/006y8mN6ly1g8o78xw42tj30fy07aabj.jpg)

> $$
> 总带宽:100\times9+100\times2=1100Mbit/s
> $$
>
> 100X9是指9台主机,100X2是指万维网服务器和电子邮件服务器所占的带宽



---

3-33 在图 3-31 中，以太网交换机有 6 个接口，分别接到 5 台主机和一个路由器。在下面表中的“动作”一栏中，表示先后发送了 4 个帧。假定在开始时，以太网交换机的交换表是空的。试把该表中其他的栏目都填写完。

![image-20191106122055732](https://tva1.sinaimg.cn/large/006y8mN6ly1g8o7abmnq1j30af05pwf3.jpg)

|    动作    | 交换表状态 | 目的转发接口 |             说明              |
| :--------: | :--------: | :----------: | :---------------------------: |
| A发送帧给D | write(A,1) |     ALL      | 初始交换表为空,以广播形式发送 |
| D发送帧给A | write(D,4) |      A       |       交换机已知交换表        |
| E发送帧给A | write(E,5) |      A       |       交换机已知交换表        |
| A发送帧给E |     ~~     |      E       |       交换机已知交换表        |

---

3-34 有两台主机 A 和 B 接在 800 m 长的电缆线的两端，并在 t=0 时各自向对方发送一个帧，长度为 1500 bit（包括首部和前同步码）。假定在 A 和 B 之间有 4个转发器, 在 转发帧时会产生20比特的时延。设传输速率为100Mbit/s，而 CSMA/CD 的退避时间是随机数 r 倍的争用期，争用期为 512 bit，在发生第一次碰撞后，在退避时 A 选择 r=0 而 B 选择 r=1。忽略发生碰撞后的人为干扰信号和帧间最小间隔。

(1) 设信号的传播速率是 2 x$$10^3$$m/s。试计算从 A 到 B（包括 4 个转发器）的传播时延

> $$
> 传播时延:\frac{800m}{2\times 10^3m/s}+4\times\frac{20bit}{10\times10^5bit/s}=4.8\mu s
> $$
>
> 

(2) 在什么时间（以秒为单位）B 完全收到了 A 发送的帧？

> 1. t=0$$\mu s$$是AB同时开始发送
> 2. t=4.8是AB同时碰撞
> 3. t=9.6是B发送完毕,A开始重传
> 4. t=14.4时A重传的第一个bit到底
> 5. $$t=14.4+1500/10^8\mu s$$时,A重传完毕,$t=29.4\mu s$,B完全收到A发送的帧

(3) 现在假定只有 A 发送帧，帧长仍为 1500 bit，但 4 个转发器都用交换机来代替。交换机在进行存储转发时还要产生额外的 20 bit 的处理时延。在什么时间（以秒为单位）B 完全收到了 A 发送的帧?

> $$
> 每一节电缆=800m/5=160m\\
> 每一节传输时间=\frac{160m}{2\times10^8m/s}=0.8\mu s\\
> 交换时延:(1+4)*\frac{1500bit}{10^8bit/s}=75\mu s\\
> 处理时间为20比特时=0.2\mu s\\
> 总时延:5\times0.8\mu s+75\mu s+4\times0.2\mu s=79.2\mu s
> $$
>
> 
>
> 

---

Problem Description

省政府“畅通工程”的目标是使全省任何两个村庄间都可以实现公路交通（但不一定有直接的公路相连，只要能间接通过公路可达即可）。经过调查评估，得到的统计表中列出了有可能建设公路的若干条道路的成本。现请你编写程序，计算出全省畅通需要的最低成本。

Input

测试输入包含若干测试用例。每个测试用例的第1行给出评估的道路条数 N、村庄数目M ( < 100 )；随后的 N
行对应村庄间道路的成本，每行给出一对正整数，分别是两个村庄的编号，以及此两村庄间道路的成本（也是正整数）。为简单起见，村庄从1到M编号。当N为0时，全部输入结束，相应的结果不要输出。

Output

对每个测试用例，在1行里输出全省畅通需要的最低成本。若统计数据不足以保证畅通，则输出“?”。

Sample Input

```
3 3
1 2 1
1 3 2
2 3 4
1 3
2 3 2
0 100
```

Sample Output

```
3
?
```

```c++
#include <cstdio>
#include <iostream>
using namespace std;
#define INF 0x3f3f3f3f
#define maxn 1111
struct node
{
	int u,v,w;
}edge[maxn];
int n,m,fa[maxn];
int cmp(node a,node b)
{
	if(a.w!=b.w)return a.w<b.w;
	if(a.u!=b.u)return a.u<b.u;
	return a.v<b.v;
}
int find(int x)
{
	if(fa[x]==x) return x;
	return fa[x]=find(fa[x]);
}
int kruskal(int n,int m)
{
	for(int i=1;i<=n;i++)fa[i]=i;
	int ans=0,cnt=0;
	sort(edge,edge+m,cmp);
	for(int k=0;k<m;k++)
	{
		int x=find(edge[k].u),y=find(edge[k].v);
		if(x!=y)
		{
			cnt++;
			fa[x]=y;
			ans+=edge[k].w;
			if(cnt==n-1)return ans;
		}
	}
	return -1;
}
int main()
{
	cin>>m>>n;
	while (m!=0) 
	{
		for(int i=0;i<m;i++)scanf("%d%d%d",&edge[i].u,&edge[i].v,&edge[i].w);
		int ans=kruskal(n,m);
		if(ans==-1)cout<<"?"<<endl;
		else cout<<ans<<endl;
		cin>>m>>n;
	}
	return 0;
}
```

![image-20191107160757864](https://tva1.sinaimg.cn/large/006y8mN6ly1g8pjgwpbehj30r700jglm.jpg)

